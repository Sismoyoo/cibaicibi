<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cibaicibi POS</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;padding:0;height:100%;
  font-family:-apple-system,BlinkMacSystemFont,Arial;
  background:#f4f4f4;
}
.menu-filter{
  display:flex;
  gap:6px;
  margin-bottom:6px;
}
.menu-filter select{
  flex:1;
}
.menu-filter input{
  flex:2;
}
.laporan-scroll{
  overflow-y:auto;
  max-height:260px;
  padding-right:4px;
}
.owner b{
  display:block;
  margin-top:8px;
}
.owner div,
.owner li{
  font-size:14px;
}
/* ===== DAY MODE MENU TEXT FIX ===== */
body:not(.dark) .menu-btn{
  color:#000;
}

body:not(.dark) .menu-btn small{
  color:#000;
}

body:not(.dark) .menu-btn b,
body:not(.dark) .menu-btn span{
  color:#000;
}

body.dark{background:#121212;color:#eee}

/* HEADER */
header{
  height:56px;
  background:#fff;
  border-bottom:1px solid #ddd;
  display:flex;
  align-items:center;
  padding:0 16px;
  font-size:20px;
  font-weight:700;
}
body.dark header{background:#1e1e1e;border-color:#333}
header button{
  margin-left:auto;
  border:none;
  background:none;
  font-size:20px;
}

/* APP */
.app{
  height:calc(100% - 56px);
  display:flex;
  gap:10px;
  padding:10px;
  min-height:0;
}
@media (orientation:portrait){.app{flex-direction:column}}
@media (orientation:landscape){.app{flex-direction:row}}

/* PANEL */
.panel{
  background:#fff;
  border-radius:14px;
  padding:12px;
  flex:1;
  display:flex;
  flex-direction:column;
  min-height:0;
}
body.dark .panel{background:#1e1e1e}

/* MENU */
.menu-scroll{
  flex:1;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}
.menu-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.menu-btn{
  padding:14px;
  border-radius:12px;
  border:1px solid #ddd;
  background:#fff;
  text-align:center;
}
body.dark .menu-btn{
  background:#2a2a2a;
  color:#eee;
  border-color:#333;
}
.menu-btn:active{background:#2E7D32;color:#fff}

/* CART */
.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
}
.qty button{
  width:28px;height:28px;border-radius:50%;
  border:none;background:#ccc;font-size:18px;
}

/* FORM */
input,select,button{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:6px;
}
button{
  background:#2E7D32;
  color:#fff;
  border:none;
}
.owner button{background:#455A64}

/* TOTAL */
.total{
  text-align:right;
  font-size:22px;
  font-weight:700;
  margin:6px 0;
}
  /* ===== MOBILE UX FIX ===== */
@media (orientation:portrait){
  .app{
    flex-direction:column;
    gap:6px;
  }

  /* Menu lebih besar */
  .panel.menu-panel{
    flex:0 0 65%;
  }

  /* Kasir lebih kecil */
  .panel.cart-panel{
    flex:0 0 35%;
  }

  /* Tombol simpan sticky */
  .save-bar{
    position:sticky;
    bottom:0;
    background:inherit;
    padding-top:6px;
  }

  /* Grafik diperkecil */
  canvas{
    max-height:140px;
  }
}
</style>
</head>

<body>

<header>
  üçΩÔ∏è Cibaicibi POS
  <button onclick="toggleDark()">üåô</button>
</header>

<div class="app">

  <!-- MENU -->
  <div class="panel menu-panel">
    <div class="menu-filter">
  <select id="filterKategori" onchange="renderMenu()">
    <option value="">Semua</option>
    <option value="Makanan">Makanan</option>
    <option value="Minuman">Minuman</option>
  </select>

  <input id="searchMenu" placeholder="üîç Cari..." oninput="renderMenu()">
</div>

    <div class="menu-scroll">
      <div id="menuList" class="menu-grid"></div>
    </div>
  </div>

  <!-- CART & LAPORAN -->
  <div class="panel cart-panel">
    <div id="cartList"></div>
    <div class="total">Rp <span id="total">0</span></div>

    <div class="save-bar">
  <button onclick="simpanTransaksi()">SIMPAN</button>
</div>

    <div class="owner laporan-scroll">
      <b>üìÖ Filter Tanggal</b>
      <input type="date" id="tglMulai">
      <input type="date" id="tglAkhir">
      <button onclick="updateLaporan()">Terapkan</button>
      <button onclick="exportCSV()">Export CSV</button>

      <b>üìä Laporan</b>
      <div>üí∞ Omzet Hari Ini: Rp <b><span id="omzetHariIni">0</span></b></div>
      <div>Total Penjualan: Rp <span id="omzetHari">0</span></div>
      <div>Total Menu Terjual: <span id="totalTerjual">0</span></div>

      <b>üì¶ Penjualan Menu</b>
      <ul id="menu30Hari"></ul>

      <b>üìà Grafik Omzet</b>
      <canvas id="grafikOmzet" height="180"></canvas>

      <button onclick="syncMenuGithub()">Sync Menu GitHub</button>
      <button onclick="backupLocal()">Backup</button>
      <input type="file" id="restoreFile">
      <button onclick="restoreLocal()">Restore</button>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="app.js"></script>
</body>
</html>
